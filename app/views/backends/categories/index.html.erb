<div class="row">
  <div class="col-lg-12">
    <nav class="navbar navbar-inverse" role="navigation">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="fa fa-bars"></span>
        </button>
        <a class="navbar-brand" href="#"><%= t('backends.nav') %></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav">

          <li>
            <%= link_to( t('backends.new'),"#",
              data: {
                target: "#MyModal",
                action: new_backends_category_path(category_type: params[:category_type]),
                title: Category.model_name.human,
                no_turbolink: true,  
              },
            ) %>
          </li> 
        
        </ul>
      </div><!-- /.navbar-collapse -->
    </nav>
  </div>
</div>

<div class="sortable_items" data-url="<%= sort_backends_categories_path %>">
  <% @categories.each do |category| %>
  <div class="panel panel-default" data-item="<%= category.id %>">
    <div class="panel-heading" role="tab">
      <h4 class="panel-title">
        <div class="handle pull-left" style="padding: 0 5px">
          <i class="fa fa-arrows" aria-hidden="true"></i>
        </div>
        <a role="button" data-toggle="collapse" href="#category<%= category.id %>" >
        <%= category.name %> 
       
      </a>

      <div class="pull-right">
      <a data-target="#MyModal" data-title="新增分類" data-action="<%= new_backends_category_path(parent_id: category.id) %>" class="btn btn-xs btn-success">
          <i class="fa fa-plus"></i>
        </a>
        <a data-target="#MyModal" data-title="編輯分類" data-action="<%= edit_backends_category_path(category) %>" class="btn btn-xs btn-warning">
          <i class="fa fa-pencil"></i>
        </a>
        <%= link_to(backends_category_path(category),class: "btn btn-xs btn-danger", method: :delete,data:{confirm: "Are You sure?"}) do %>
          <i class="fa fa-trash-o"></i>
        <% end %>
      </div></h4>
    </div>
    <div id="category<%= category.id %>" class="panel-collapse collapse in">
      <div class="panel-body" style="background: #e3e3e3">
        <div class="panel-group sortable_items" role="tablist" aria-multiselectable="true">
          <% category.children.each do |child| %>
          <div class="panel panel-default" data-item="<%= child.id %>">
            <div class="panel-heading" role="tab" id="category<%= child.id %>">
              <h4 class="panel-title">
                <div class="handle pull-left" style="padding: 0 5px">
                  <i class="fa fa-arrows" aria-hidden="true"></i>
                </div>
                <a><%= child.name %></a>
              <div class="pull-right">
                <a data-target="#MyModal" data-title="編輯分類" data-action="<%= edit_backends_category_path(child) %>" class="btn btn-xs btn-warning">
                  <i class="fa fa-pencil"></i>
                </a>
                
                <%= link_to(backends_category_path(child),class: "btn btn-xs btn-danger", method: :delete,data:{confirm: "Are You sure?"}) do %>
                  <i class="fa fa-trash-o"></i>
                <% end %>
              </div></h4>
            </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <% end %>
</div>  
